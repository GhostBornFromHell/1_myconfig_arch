setopt promptsubst
# Prompt symbols 
prompt_symbols+=(' ðŸ˜ ')
prompt_symbols+=(' âœ–â€¿âœ– ')
prompt_symbols+=(' ðŸ’ ')
prompt_symbols+=(' ðŸ©µ ')
prompt_symbols+=(' ðŸ”¥ ')
prompt_symbols+=(' ðŸ§ ')
prompt_symbols+=(' ðŸ–• ')
prompt_symbols+=(' ïŒ‚ ')
prompt_symbols+=(' ðŸ‘½ ')
prompt_symbols+=(' ðŸ˜ ')
prompt_symbols+=(' ó°£­ ')
prompt_symbols+=(' ïŒ§  ')
prompt_symbols+=(' ðŸŒ ')
prompt_symbols+=(' ðŸ‘¿ ')
prompt_symbols+=(' ðŸŒ¸ ')

# GIT PROMPT
[[ $prompt_git_want_i == true ]] && {}
git_symbols+=('ð–£‚ï¸Ž')
git_symbols+=('ð–¤')
# git_symbols+=('ðŸŒ±')
git_symbols+=('î‚ ')
git_symbols+=('ð–¦¥')
git_symbols+=('îœ¥')

python_symbols+=('ó°Œ  ')
#python_symbols+=('ðŸ')
python_symbols+=('î°– ')
python_symbols+=('ó±”Ž ')
python_symbols+=('ðœ³º')

prompt_symbol_success='ðŸŸ¢'
prompt_symbol_fail='ðŸ’©'

# prompt_symbol_fail='â—‰'
#prompt_symbol_fail='â—‰'


git_branch_prompt() {
  if git rev-parse --is-inside-work-tree >/dev/null 2>&1; then
    local branch=$(git branch --show-current 2>/dev/null)
    [[ -n $branch ]] && echo -n "$branch"
  fi
}

git_files_prompt() {
  if git rev-parse --is-inside-work-tree >/dev/null 2>&1; then
    local changes=$(git status -s -uno 2>/dev/null | wc -l)
    if (( changes > 0 )); then
        echo -n "$git_symbol $changes"
    else
        return 0
    fi
  fi
}

last_status_prompt() {
  local last=$?
  (( last != 0 )) && echo -n "$prompt_symbol_fail $last $prompt_symbol_fail"
}


configure_prompt() {

 PROMPT=$'%F{%(#.blue.green)}â”Œâ”€â”€('
#PROMPT+=$'{VIRTUAL_ENV:+$basename $VIRTUAL_ENV:t}'
PROMPT+=$'%B%F{%(#.red.blue)}%n'
PROMPT+=$'$prompt_symbol%m'
PROMPT+=$'%F{%(#.blue.green)})-'
PROMPT+=$'[%B%F{reset}%(6~.%-1~/â€¦/%4~.%5~)%b%F{%(#.blue.green)}]'
PROMPT+=$'%F{%(#.green.magenta)}'
PROMPT+=$' $(git_branch_prompt)'
PROMPT+=$' $(git_files_prompt)'
#PROMPT+='${VIRTUAL_ENV:t}'
PROMPT+='${VIRTUAL_ENV:+  ${VIRTUAL_ENV:t} $python_symbol }'
PROMPT+=$'%F{%(#.magenta.green)}'
PROMPT+=$'\nâ””â”€%B%(#.%F{red}#.%F{blue}$)%b%F{reset} '
PROMPT+=$'$(last_status_prompt)'
unset prompt_symbol

}
# Variables prompt

if [ "$color_prompt" = yes ]; then
    VIRTUAL_ENV_DISABLE_PROMPT=1
    configure_prompt

    # Syntax highlighting (Arch)
    for hl in \
        /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh \
        /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
    do
        [ -f "$hl" ] && source "$hl" && break
    done
fi


unset color_prompt force_color_prompt

# Equivalent Prompt command
precmd () {

    local cols=${COLUMNS:-$(tput cols)}
    print ""
    print -P "%F{magenta}${(l:$cols::â”€:)}%f"
    print ""
    
    python_symbol=${python_symbols[$((RANDOM % ${#python_symbols[@]} + 1))]}
    prompt_symbol=${prompt_symbols[$((RANDOM % ${#prompt_symbols[@]} + 1))]}
    (( ${#git_symbols[@]} )) && git_symbol=${git_symbols[$((RANDOM % ${#git_symbols[@]} + 1))]} || git_symbol='A'
}
